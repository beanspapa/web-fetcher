# Task List - TDD 기반 뉴스 컨텐츠 추출기 개발

이 문서는 테스트 주도 개발(TDD) 방식으로 playwright-ghost 기반 **뉴스 컨텐츠 추출기**를 개발하기 위한 작은 단위 태스크 목록입니다.

**프로젝트 목적**: 다양한 뉴스 사이트에서 기사 제목, 본문, 메타데이터를 자동으로 추출하는 도구 개발

**TDD 사이클**: Red (실패하는 테스트 작성) → Green (테스트 통과하는 최소 코드 작성) → Refactor (코드 개선)

각 태스크는 독립적으로 실행 가능하며, 테스트 우선 접근법을 따릅니다.

---

## Phase 1: 프로젝트 기반 설정

### Task 1.1: Node.js 환경 검증
- [ ] Node.js LTS 버전 설치 확인 테스트 작성
- [ ] `node -v`, `npm -v` 명령어 실행 검증
- [ ] 버전 정보 출력 및 최소 요구사항 만족 확인

### Task 1.2: 프로젝트 구조 초기화
- [ ] Git 저장소 초기화: `git init`
- [ ] 기본 `package.json` 생성: `npm init -y`
- [ ] 기본 폴더 구조 생성: `src/`, `test/`

### Task 1.3: TypeScript 환경 설정
- [ ] TypeScript 설치: `npm install --save-dev typescript @types/node`
- [ ] `tsconfig.json` 설정 (ESM, strict mode)
- [ ] `package.json`에 ESM 설정 추가: `"type": "module"`

### Task 1.4: 개발 환경 파일 설정
- [ ] `.gitignore` 파일 생성 (node_modules, dist, .env)
- [ ] `.editorconfig` 파일 생성 (선택사항)
- [ ] 초기 커밋: `git commit -m "프로젝트 초기 세팅"`

---

## Phase 2: 테스트 프레임워크 설정 (Vitest)

### Task 2.1: Vitest 테스트 환경 구축
- [ ] Vitest 및 관련 패키지 설치: `npm install --save-dev vitest @vitest/ui`
- [ ] `vite.config.ts` 생성 및 TypeScript 설정
- [ ] 첫 번째 더미 테스트 작성 및 실행 확인

### Task 2.2: 테스트 스크립트 설정
- [ ] `package.json`에 테스트 스크립트 추가: `"test": "vitest"`
- [ ] `npm test` 명령어 실행 검증
- [ ] 테스트 결과 출력 포맷 확인

---

## Phase 3: 뉴스 설정 관리 모듈 (TDD)

### Task 3.1: 뉴스 사이트 설정 타입 정의 테스트
- [ ] **RED**: `config.test.ts` - 뉴스 사이트 설정 객체 타입 검증 테스트 작성
- [ ] **GREEN**: `config.ts` - 뉴스 사이트별 선택자, URL 패턴 인터페이스 구현
- [ ] **REFACTOR**: 설정 구조 최적화 (제목, 본문, 작성일, 작성자 선택자)

### Task 3.2: 환경변수 로딩 테스트
- [ ] **RED**: 뉴스 사이트 URL, 출력 경로 등 환경변수 로딩 테스트 작성
- [ ] **GREEN**: `dotenv` 설치 및 뉴스 관련 환경변수 로딩 구현
- [ ] **REFACTOR**: 환경변수 우선순위 로직 개선

### Task 3.3: 뉴스 사이트 설정 병합 로직 테스트
- [ ] **RED**: 기본 뉴스 설정과 환경변수 병합 테스트 작성
- [ ] **GREEN**: 뉴스 사이트별 설정 병합 함수 구현
- [ ] **REFACTOR**: 타입 안전성 및 뉴스 메타데이터 유효성 검증 추가

---

## Phase 4: 브라우저 관리 모듈 (TDD)

### Task 4.1: 브라우저 인스턴스 생성 테스트
- [ ] **RED**: `browser.test.ts` - 뉴스 사이트 접근용 브라우저 생성 테스트 작성
- [ ] **GREEN**: playwright-ghost 설치 및 기본 브라우저 생성 함수 구현
- [ ] **REFACTOR**: 뉴스 사이트 접근에 최적화된 브라우저 옵션 설정

### Task 4.2: 페이지 생성 및 뉴스 사이트 설정 테스트
- [ ] **RED**: 페이지 생성 및 뉴스 사이트 접근용 User-Agent 설정 테스트 작성
- [ ] **GREEN**: 페이지 생성 및 뉴스봇 차단 회피 설정 함수 구현
- [ ] **REFACTOR**: 페이지 설정 옵션 확장성 개선

### Task 4.3: 브라우저 종료 및 에러 처리 테스트
- [ ] **RED**: 브라우저 정상 종료 및 뉴스 사이트 접근 에러 처리 테스트 작성
- [ ] **GREEN**: try-finally 블록을 이용한 안전한 종료 구현
- [ ] **REFACTOR**: 뉴스 사이트별 에러 타입 처리 로직 개선

---

## Phase 5: 뉴스 페이지 네비게이션 모듈 (TDD)

### Task 5.1: 뉴스 URL 유효성 검증 테스트
- [ ] **RED**: `navigation.test.ts` - 뉴스 URL 형식 검증 테스트 작성
- [ ] **GREEN**: 뉴스 URL 패턴 매칭 및 유효성 검증 함수 구현
- [ ] **REFACTOR**: 다양한 뉴스 사이트 URL 패턴 지원 개선

### Task 5.2: 뉴스 페이지 이동 테스트
- [ ] **RED**: 뉴스 페이지 이동 및 로딩 완료 확인 테스트 작성
- [ ] **GREEN**: `page.goto()` 뉴스 페이지 전용 구현
- [ ] **REFACTOR**: 뉴스 사이트 로딩 최적화 (광고, 팝업 차단)

### Task 5.3: 뉴스 페이지 로딩 에러 처리 테스트
- [ ] **RED**: 뉴스 페이지 404, 페이월 등 에러 상황 처리 테스트 작성
- [ ] **GREEN**: 뉴스 사이트별 HTTP 상태 코드 확인 및 에러 처리 구현
- [ ] **REFACTOR**: 뉴스 사이트별 재시도 로직 및 로깅 개선

---

## Phase 6: 뉴스 컨텐츠 추출 모듈 (TDD)

### Task 6.1: 뉴스 선택자 검증 테스트
- [ ] **RED**: `extractor.test.ts` - 뉴스 제목, 본문, 메타데이터 선택자 유효성 테스트 작성
- [ ] **GREEN**: 뉴스 요소별 선택자 검증 함수 구현
- [ ] **REFACTOR**: 뉴스 사이트별 복잡한 선택자 패턴 지원

### Task 6.2: 뉴스 제목 추출 테스트
- [ ] **RED**: 뉴스 제목 추출 테스트 작성 (Mock 뉴스 DOM 사용)
- [ ] **GREEN**: `$eval` 기반 뉴스 제목 추출 함수 구현
- [ ] **REFACTOR**: 제목 정제 (특수문자, 광고 텍스트 제거) 및 타입 안전성 개선

### Task 6.3: 뉴스 본문 추출 테스트
- [ ] **RED**: 뉴스 본문 텍스트 추출 테스트 작성
- [ ] **GREEN**: 뉴스 본문 추출 및 정제 함수 구현
- [ ] **REFACTOR**: 광고, 관련기사 제거 및 본문 순수성 개선

### Task 6.4: 뉴스 메타데이터 추출 테스트
- [ ] **RED**: 작성일, 작성자, 카테고리 등 메타데이터 추출 테스트 작성
- [ ] **GREEN**: 뉴스 메타데이터 추출 및 구조화 함수 구현
- [ ] **REFACTOR**: 날짜 형식 통일, 작성자 정보 표준화

### Task 6.5: 뉴스 데이터 구조화 테스트
- [ ] **RED**: 추출된 뉴스 데이터 객체 구조화 테스트 작성
- [ ] **GREEN**: 뉴스 아티클 데이터 매핑 및 구조화 함수 구현
- [ ] **REFACTOR**: 뉴스 스키마 검증 및 변환 로직 개선

---

## Phase 7: 뉴스 파일 저장 모듈 (TDD)

### Task 7.1: 뉴스 저장 디렉터리 생성 테스트
- [ ] **RED**: `storage.test.ts` - 뉴스 결과 디렉터리 생성 테스트 작성
- [ ] **GREEN**: 날짜별, 사이트별 디렉터리 생성 함수 구현
- [ ] **REFACTOR**: 권한 및 경로 검증 개선

### Task 7.2: 뉴스 JSON 파일 저장 테스트
- [ ] **RED**: 뉴스 데이터 JSON 형식 저장 테스트 작성
- [ ] **GREEN**: `fs.writeFileSync` 기반 뉴스 JSON 저장 구현
- [ ] **REFACTOR**: 뉴스 파일명 규칙 (날짜-사이트-제목) 및 백업 로직 추가

### Task 7.3: 뉴스 CSV 파일 저장 테스트 (선택)
- [ ] **RED**: 뉴스 데이터 CSV 형식 저장 테스트 작성
- [ ] **GREEN**: csv-writer 라이브러리 연동한 뉴스 CSV 저장 구현
- [ ] **REFACTOR**: 뉴스 컬럼 헤더 및 인코딩 옵션 개선

### Task 7.4: 뉴스 추출 로그 관리 테스트
- [ ] **RED**: 뉴스 추출 성공/실패 로그 분리 저장 테스트 작성
- [ ] **GREEN**: 뉴스 사이트별 로그 레벨별 파일 저장 구현
- [ ] **REFACTOR**: 뉴스 추출 로그 로테이션 및 포맷 개선

---

## Phase 8: 뉴스 크롤러 통합 모듈 (TDD)

### Task 8.1: 뉴스 크롤러 클래스 구조 테스트
- [ ] **RED**: `news-crawler.test.ts` - 뉴스 크롤러 인스턴스 생성 테스트 작성
- [ ] **GREEN**: 기본 NewsCrawler 클래스 구현
- [ ] **REFACTOR**: 뉴스 사이트별 의존성 주입 및 인터페이스 분리

### Task 8.2: 단일 뉴스 기사 크롤링 테스트
- [ ] **RED**: 단일 뉴스 기사 크롤링 전체 플로우 테스트 작성
- [ ] **GREEN**: 모든 모듈 연동한 뉴스 크롤링 함수 구현
- [ ] **REFACTOR**: 뉴스 추출 에러 전파 및 상태 관리 개선

### Task 8.3: 뉴스 리스트 페이지 크롤링 테스트
- [ ] **RED**: 뉴스 리스트에서 여러 기사 URL 추출 테스트 작성
- [ ] **GREEN**: 뉴스 목록 순차 처리 및 결과 수집 구현
- [ ] **REFACTOR**: 뉴스 사이트별 병렬 처리 및 속도 제한 추가

### Task 8.4: 뉴스 크롤링 결과 통계 테스트
- [ ] **RED**: 뉴스 추출 성공/실패 통계 집계 테스트 작성
- [ ] **GREEN**: 뉴스 크롤링 결과 요약 기능 구현
- [ ] **REFACTOR**: 뉴스 사이트별 상세 메트릭 및 리포팅 개선

---

## Phase 9: 뉴스 CLI 인터페이스 (TDD)

### Task 9.1: 뉴스 크롤링 명령행 인자 파싱 테스트
- [ ] **RED**: `cli.test.ts` - 뉴스 URL, 출력 형식 등 CLI 옵션 파싱 테스트 작성
- [ ] **GREEN**: 뉴스 크롤링 전용 CLI 인터페이스 구현
- [ ] **REFACTOR**: 뉴스 사이트별 도움말 및 유효성 검증 개선

### Task 9.2: 뉴스 크롤러 메인 실행 함수 테스트
- [ ] **RED**: `main.ts` 뉴스 크롤링 전체 실행 플로우 테스트 작성
- [ ] **GREEN**: CLI에서 뉴스 크롤러 실행하는 main 함수 구현
- [ ] **REFACTOR**: 뉴스 크롤링 종료 코드 및 신호 처리 개선

---

## Phase 10: 빌드 및 배포 설정

### Task 10.1: 빌드 스크립트 테스트
- [ ] TypeScript 컴파일 테스트 및 `npm run build` 검증
- [ ] 빌드 결과물 실행 테스트: `npm start`
- [ ] 개발 모드 테스트: `npm run dev`

### Task 10.2: 패키지 의존성 검증
- [ ] 모든 필수 패키지 설치 확인
- [ ] 보안 취약점 검사: `npm audit`
- [ ] 라이선스 호환성 검증

---

## Phase 11: 문서화 및 최종 검증

### Task 11.1: README 업데이트
- [ ] 뉴스 크롤링 설치 및 사용법 문서 작성
- [ ] 뉴스 사이트별 설정 예제 코드 및 가이드 추가
- [ ] 뉴스 추출 문제 해결 가이드 작성

### Task 11.2: 뉴스 크롤링 전체 통합 테스트
- [ ] 실제 뉴스 사이트 대상 End-to-End 테스트 시나리오 작성
- [ ] 다양한 뉴스 사이트 크롤링 테스트
- [ ] 뉴스 추출 성능 및 안정성 검증

### Task 11.3: 최종 리팩토링
- [ ] 뉴스 크롤링 코드 품질 점검 및 개선
- [ ] 테스트 커버리지 확인 및 보완
- [ ] 뉴스 추출기 최종 문서화 및 배포 준비

---

**각 태스크는 TDD 사이클(Red-Green-Refactor)을 완료한 후 다음 태스크로 진행합니다.**
**모든 테스트는 독립적으로 실행 가능해야 하며, 이전 태스크의 결과에 의존하지 않아야 합니다.** 